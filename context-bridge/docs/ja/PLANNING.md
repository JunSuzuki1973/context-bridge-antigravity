# Context Bridge for Antigravity - 企画書

**プロジェクト名**: Context Bridge for Antigravity  
**バージョン**: 1.0.0  
**作成日**: 2026-01-17  
**ステータス**: ✅ 実装完了

---

## 📋 エグゼクティブサマリー

Manual Bridge Modeは、APIキーを使用せずに外部のWebチャットボット（Google AI Studio, ChatGPT等）を推論エンジンとして活用するための「Human Relay（人間中継）」機能です。Antigravityのスキルとして実装され、クリップボードを介した安全で効率的なコード生成・編集ワークフローを提供します。

### 主要な価値提供

1. **コストゼロ**: API消費なし、無料のWebチャットボットを活用
2. **大規模対応**: Gemini 3.0 Proで最大100万トークンのコンテキスト送信が可能
3. **安全性**: 専用GUIによりターミナルへの誤操作を防止
4. **シンプル**: 標準ライブラリのみで動作、追加インストール不要

---

## 🎯 背景と課題

### 現状の課題

1. **APIコストの制約**
   - GPT-4やGemini APIの利用には従量課金が必要
   - 大規模プロジェクトでのトークン消費が高額になる可能性
   - 個人開発者や学生にとって負担

2. **コンテキスト制限**
   - 多くのAPI経由AIはコンテキスト長に制限がある
   - プロジェクト全体のコードを一度に送信できない

3. **操作の危険性**
   - ターミナルに大量のテキストを直接ペーストする事故
   - 意図しないコマンド実行のリスク

### ソリューション

**Manual Bridge Mode**は、上記の課題を以下の方法で解決します：

- Webブラウザ経由の無料チャットボット利用
- 専用GUIによる安全なクリップボード操作
- 構造化プロンプトと自動パッチ適用による効率化

---

## 🚀 コンセプト

### "ShotGun Code" × "Human Relay"

**ShotGun Code**: プロジェクト全体のコンテキストを一気にAIに送信  
**Human Relay**: 人間がクリップボード経由でAIとローカル環境を中継

このハイブリッドアプローチにより：
- AIの推論能力を最大限活用
- APIコストゼロで実現
- 人間の確認を挟むことで安全性を確保

### ターゲットAI

**Google AI Studio (Gemini 3.0 Pro)** を第一推奨：
- 100万トークン対応
- 無料（2026年1月時点）
- プロジェクト全ファイル送信が可能

### 使用フロー

```
[プロジェクト]
     ↓ (往路)
  👤 User → 📋 Clipboard
     ↓
  🌐 Web AI (Google AI Studio)
     ↓ (復路)
  📋 Clipboard → 👤 User
     ↓
[プロジェクト]
```

---

## 🎨 機能要件

### 必須機能

1. **ファイル収集機能**
   - `.gitignore` パターンの自動認識
   - バイナリファイルの自動除外
   - 手動でのファイル選択/除外

2. **プロンプト生成機能**
   - XML形式でのファイルコンテキスト構造化
   - 厳格なシステムプロンプトの自動付与
   - ユーザー指示の統合

3. **パッチ適用機能**
   - `<<<< SEARCH ... ==== ... >>>>` 形式の解析
   - 新規ファイル作成対応
   - ファイル削除対応
   - Fuzzy matching（空白揺らぎ許容）

4. **GUI**
   - tkinterによるクロスプラットフォーム対応
   - 2ペイン構成（往路/復路）
   - リアルタイムログ表示
   - 統計情報表示（ファイル数、サイズ、トークン推定）

### 推奨機能（将来拡張）

- [ ] 履歴管理（適用したパッチの記録）
- [ ] Undo/Redo機能
- [ ] プロジェクトプリセット（よく使うファイルセット）
- [ ] 複数AI対応（Claude, GPT-4等への最適化）
- [ ] コンフリクト解決支援

---

## 🏗️ 技術選定

### Python + tkinter

**選定理由**:
- クロスプラットフォーム（Windows/macOS/Linux）
- 標準ライブラリ、追加インストール不要
- シンプルなGUIに適している

**代替案検討**:
- ❌ Electron: オーバースペック、配布サイズ大
- ❌ PyQt: ライセンス問題、依存関係多
- ✅ tkinter: シンプル、軽量、標準

### クリップボード操作

`tkinter` の標準機能を使用:
- `clipboard_clear()`, `clipboard_append()`, `clipboard_get()`
- 外部ライブラリ不要（`pyperclip` 不使用）

---

## 📊 成功指標

### 短期（1ヶ月）

- ✅ 基本機能の実装完了
- ✅ デモプロジェクトでの動作確認
- [ ] 5人以上のベータテスター獲得

### 中期（3ヶ月）

- [ ] 100以上のプロジェクトで使用
- [ ] バグレポート10件以上の収集と修正
- [ ] ユーザーフィードバックに基づく機能改善

### 長期（6ヶ月）

- [ ] Antigravityの公式スキルカタログに掲載
- [ ] 月間500アクティブユーザー
- [ ] コミュニティ貢献（プルリクエスト5件以上）

---

## 🎯 ターゲットユーザー

### プライマリペルソナ

**名前**: 田中太郎（大学生）  
**年齢**: 21歳  
**職業**: 情報科学専攻の学生  
**課題**: 
- 課題でAIを使いたいが、APIキーの予算がない
- 大規模なプロジェクトのリファクタリングをAIに手伝ってほしい

**このスキルの価値**:
- 無料のGoogle AI Studioで全コード送信可能
- 安全にコード編集ができる

### セカンダリペルソナ

**名前**: 佐藤花子（フリーランスエンジニア）  
**年齢**: 32歳  
**職業**: Webアプリケーション開発者  
**課題**:
- クライアントプロジェクトでAPIコストを節約したい
- 複数のAIサービスを使い分けたい

**このスキルの価値**:
- API消費ゼロでコスト削減
- Google, OpenAI, Anthropicのどれでも使える

---

## 🛣️ ロードマップ

### v1.0 (現在) ✅
- [x] 基本GUI実装
- [x] ファイル収集機能
- [x] プロンプト生成
- [x] パッチ適用
- [x] デモプロジェクト
- [x] ドキュメント整備

### v1.1 (2026 Q2)
- [ ] 履歴管理機能
- [ ] プリセット機能
- [ ] 多言語サポート（英語版UI）

### v2.0 (2026 Q3)
- [ ] プラグインシステム
- [ ] カスタムシステムプロンプト
- [ ] チーム共有機能

---

## 💡 差別化要因

### 類似ツールとの比較

| 特徴 | Manual Bridge | aider | cursor | GitHub Copilot |
|------|--------------|-------|--------|----------------|
| **API不要** | ✅ | ❌ | ❌ | ❌ |
| **大規模コンテキスト** | ✅ (100万) | ⚠️ (制限あり) | ⚠️ (制限あり) | ❌ (制限あり) |
| **GUI操作** | ✅ | ❌ (CLI) | ✅ | ✅ (IDE統合) |
| **導入コスト** | ✅ 無料 | 💰 APIキー必要 | 💰 サブスク | 💰 サブスク |
| **オフライン** | ❌ | ❌ | ❌ | ❌ |

### 独自の強み

1. **完全無料**: APIキー不要、Web AI利用
2. **柔軟性**: 任意のチャットボットAIが使える
3. **安全性**: 専用GUIで誤操作防止
4. **軽量**: 標準ライブラリのみ、インストール簡単

---

## 📝 備考

### 命名の由来

- **Manual Bridge**: 手動（Manual）で橋渡し（Bridge）する
- **Airlock**: 宇宙船のエアロック（気密室）のように、安全に外部（Web AI）と内部（ローカル）を接続

### 設計哲学

**KISS原則**: Keep It Simple, Stupid
- 複雑な機能は追加しない
- ユーザーが理解しやすいUI
- 最小限の依存関係

**人間中心設計**:
- AIに全自動で任せず、人間が確認
- クリップボード操作という馴染みのある方法
- 透明性の高いログ表示

---

## 📞 お問い合わせ

プロジェクトオーナー: [JUN SUZUKI](https://junsuzuki-ai-agency.xyz/)  
作成日: 2026-01-17  
次回レビュー予定: 2026-02-17
